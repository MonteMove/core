model User {
  id                    String    @id @default(uuid()) @db.Uuid
  telegramId            String?   @map("telegram_id")
  username              String
  passwordHash          String    @map("password_hash")
  blocked               Boolean   @default(false)
  deleted               Boolean   @default(false)
  telegramNotifications Boolean   @default(false) @map("telegram_notifications")
  isHolder              Boolean   @default(false) @map("is_holder")
  isCourier             Boolean   @default(false) @map("is_courier")
  lastLogin             DateTime? @map("last_login")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  roles                   Role[]
  sessions                Session[]
  revokedTokensRevoker    RevokedToken[]   @relation("revoked_by_user")
  revokedTokensToken      RevokedToken[]   @relation("token_user")
  guidesCreated           Guide[]          @relation("guides_created_by")
  guidesUpdated           Guide[]          @relation("guides_updated_by")
  applicationsCreated     Application[]    @relation("applications_created_by")
  applicationsUpdated     Application[]    @relation("applications_updated_by")
  applicationsAssigned    Application[]    @relation("applications_assignee")
  operationsCreated       Operation[]      @relation("operations_created_by")
  operationsUpdated       Operation[]      @relation("operations_updated_by")
  operationTypesCreated   OperationType[]  @relation("operation_types_created_by")
  operationTypesUpdated   OperationType[]  @relation("operation_types_updated_by")
  operationEntriesCreated OperationEntry[] @relation("operation_entries_created_by")
  operationEntriesUpdated OperationEntry[] @relation("operation_entries_updated_by")
  currenciesCreated       Currency[]       @relation("currencies_created_by")
  currenciesUpdated       Currency[]       @relation("currencies_updated_by")
  wallets                 Wallet[]         @relation("wallet_owner")
  walletsCreated          Wallet[]         @relation("wallets_created_by")
  walletsUpdated          Wallet[]         @relation("wallets_updated_by")
  walletDetailsCreated    WalletDetail[]   @relation("wallet_details_created_by")
  walletDetailsUpdated    WalletDetail[]   @relation("wallet_details_updated_by")
  networksCreated         Network[]        @relation("networks_created_by")
  networksUpdated         Network[]        @relation("networks_updated_by")
  networkTypesCreated     NetworkType[]    @relation("network_types_created_by")
  networkTypesUpdated     NetworkType[]    @relation("network_types_updated_by")
  platformsCreated        Platform[]       @relation("platforms_created_by")
  platformsUpdated        Platform[]       @relation("platforms_updated_by")
  banksCreated            Bank[]           @relation("banks_created_by")
  banksUpdated            Bank[]           @relation("banks_updated_by")

  @@unique([username], map: "users_username_unique")
  @@unique([telegramId], map: "users_telegram_id_unique")
  @@index([username], map: "users_username_idx")
  @@index([telegramId], map: "users_telegram_id_idx")
  @@index([createdAt], map: "users_created_at_idx")
  @@index([lastLogin], map: "users_last_login_idx")
  @@index([deleted, createdAt(sort: Desc)], map: "users_deleted_created_idx")
  @@map("users")
}
