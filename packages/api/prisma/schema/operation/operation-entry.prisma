enum OperationDirection {
  credit
  debit

  @@map("operation_direction")
}

model OperationEntry {
  id          String             @id @default(uuid()) @db.Uuid
  userId      String             @map("user_id") @db.Uuid
  updatedById String             @map("updated_by_id") @db.Uuid
  operationId String             @map("operation_id") @db.Uuid
  walletId    String             @map("wallet_id") @db.Uuid
  direction   OperationDirection
  amount      Int
  deleted     Boolean            @default(false)
  createdAt   DateTime           @default(now()) @map("created_at")
  updatedAt   DateTime           @updatedAt @map("updated_at")

  created_by User      @relation("operation_entries_created_by", fields: [userId], references: [id])
  updated_by User      @relation("operation_entries_updated_by", fields: [updatedById], references: [id])
  operation  Operation @relation(fields: [operationId], references: [id], onDelete: Cascade)

  @@index([userId], map: "operation_entries_user_idx")
  @@index([updatedById], map: "operation_entries_updated_by_idx")
  @@index([operationId], map: "operation_entries_operation_idx")
  @@index([walletId], map: "operation_entries_wallet_idx")
  @@index([direction], map: "operation_entries_direction_idx")
  @@index([createdAt], map: "operation_entries_created_at_idx")
  @@index([deleted], map: "operation_entries_deleted_idx")
  @@map("operation_entries")
}
